var M=Object.defineProperty;var S=r=>{throw TypeError(r)};var D=(r,t,e)=>t in r?M(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var s=(r,t,e)=>D(r,typeof t!="symbol"?t+"":t,e),Y=(r,t,e)=>t.has(r)||S("Cannot "+e);var m=(r,t,e)=>(Y(r,t,"read from private field"),e?e.call(r):t.get(r)),T=(r,t,e)=>t.has(r)?S("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(r):t.set(r,e),H=(r,t,e,A)=>(Y(r,t,"write to private field"),A?A.call(r,e):t.set(r,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))A(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&A(a)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function A(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();class K{constructor({update:t,render:e}){s(this,"update");s(this,"render");s(this,"lastTime",0);s(this,"animationFrameId",null);s(this,"accumulator",0);this.update=t,this.render=e}start(){this.lastTime=performance.now(),this.loop()}stop(){this.animationFrameId!==null&&cancelAnimationFrame(this.animationFrameId)}loop(){const t=performance.now(),e=t-this.lastTime;this.lastTime=t;const i=1e3/60;for(this.accumulator+=e;this.accumulator>=i;)this.update(e),this.accumulator-=i;this.render(),this.animationFrameId=requestAnimationFrame(()=>this.loop())}}const b={" ":"space"};var y,E;class U{constructor(){T(this,y,new Set);T(this,E,t=>b[t]??t.toLowerCase());s(this,"isPressed",t=>m(this,y).has(t));window.addEventListener("keydown",({key:t})=>{m(this,y).add(m(this,E).call(this,t))}),window.addEventListener("keyup",({key:t})=>{m(this,y).delete(m(this,E).call(this,t))})}}y=new WeakMap,E=new WeakMap;class V{constructor({canvas:t,width:e,height:A}){s(this,"canvas");s(this,"width");s(this,"height");s(this,"context");s(this,"clear",()=>{this.context.clearRect(0,0,this.width,this.height)});if(this.canvas=t,this.width=e,this.height=A,this.context=t.getContext("2d"),this.context===null)throw new Error("Unable to get Canvas Context.");this.canvas.width=e,this.canvas.height=A}}async function X(r){return new Promise((t,e)=>{const A=new Image;A.onload=()=>{t(A)},A.onerror=()=>{e(new Error("Image could not be loaded."))},A.src=r})}class p{constructor({image:t,frames:e,gap:A,padding:i,fps:n,offsetX:a,offsetY:c,once:l}){s(this,"image");s(this,"frames");s(this,"gap");s(this,"padding");s(this,"width");s(this,"height");s(this,"currentTime",0);s(this,"fps");s(this,"offsetX");s(this,"offsetY");s(this,"once");s(this,"resetTime",()=>{this.currentTime=0});s(this,"update",t=>{const e=1e3/this.fps*this.frames;this.once?this.currentTime=Math.min(e-1e-5,this.currentTime+t):this.currentTime=(this.currentTime+t)%e});s(this,"render",({context:t},e=!1)=>{t.save(),t.translate(this.offsetX,this.offsetY),e&&(t.translate(this.width,0),t.scale(-1,1),t.translate(-this.offsetX*2,0));const A=Math.floor(this.currentTime/(1e3/this.fps)%this.frames);t.drawImage(this.image,this.gap+(this.width+this.gap)*A,this.gap,this.width,this.height,0,0,this.width,this.height),t.restore()});if(e<1)throw new Error("Frames cannot be lower than 1.");this.image=t,this.frames=e,this.gap=A,this.padding=i,this.height=t.naturalHeight-A*2,this.width=(t.naturalWidth-A*2-(e-1)*i)/e,this.fps=n,this.offsetX=a??0,this.offsetY=c??0,this.once=l??!1}static async fromSrc({src:t,...e}){const A=await X(t);return new p({image:A,...e})}}function J(){}class g{constructor(t=0,e=0){s(this,"x");s(this,"y");s(this,"add",t=>(this.x+=t.x,this.y+=t.y,this));s(this,"sub",t=>(this.x-=t.x,this.y-=t.y,this));s(this,"scale",t=>(this.x*=t,this.y*=t,this));s(this,"mag",()=>Math.sqrt(this.x*this.x+this.y*this.y));s(this,"normalize",()=>{const t=this.mag();return t!==0&&(this.x/=t,this.y/=t),this});s(this,"limit",t=>(this.mag()>t&&this.normalize().scale(t),this));s(this,"limitX",t=>(this.x=Math.max(Math.min(t,this.x),t*-1),this));s(this,"limitY",t=>(this.y=Math.max(Math.min(t,this.y),t*-1),this));this.x=t||0,this.y=e||0}clone(){return new g(this.x,this.y)}}var F;class z{constructor({width:t,height:e,x:A,y:i,position:n,vx:a,vy:c,velocity:l,anchor:d,update:v,render:I,renderer:{context:f}}){s(this,"context");s(this,"width");s(this,"height");s(this,"position");s(this,"velocity");s(this,"anchor");s(this,"update");T(this,F);s(this,"render",t=>{const{context:e,position:{x:A,y:i},width:n,height:a,anchor:c}=this;e.save(),this.flipRender&&(e.scale(-1,1),e.translate(n*-1,0)),e.translate(Math.round(A-c.x*n),Math.round(i-c.y*a)),m(this,F).call(this,t),e.restore()});s(this,"flipRender",!1);this.width=t,this.height=e,this.context=f,this.position=n??new g(A,i),this.velocity=l??new g(a,c),this.anchor={x:(d==null?void 0:d[0])??0,y:(d==null?void 0:d[1])??0},this.update=v??J,H(this,F,I??J)}get x(){return this.position.x}set x(t){this.position.x=t}get y(){return this.position.y}set y(t){this.position.y=t}get vx(){return this.velocity.x}set vx(t){this.velocity.x=t}get vy(){return this.velocity.y}set vy(t){this.velocity.y=t}}F=new WeakMap;const k="data:image/png;base64,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",N="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAoCAYAAACfKfiZAAAAAXNSR0IArs4c6QAABDVJREFUWIXFmE9II2cYxn9TitLQgrdd91KJB1dkcUFvlbZgwOihViiioFBPie3JQ8Gyh/W2hx5SKNbsKZeFLlKQLa0ZIYIUvSlUFrsrqLQXjYeWQJdEZeHrYfJ+882XmfxbaB8YnJnkm+d5n/dPvhH+ZzjtLtwaiyk5H9sqt/2ct9pduOGUARic6GJrLKZMQa3g7XYFiIhBuhic6AJgCxS05kjbDmRdP323Eh2A50arjrSdO0E6iVoZv8OtRAeXhRt9/3CzBDR2o20HbFz3vdROAH5aGrjxRg6M336sAN6/n+Lbn68A6Dy+G3ACPDc2nHIgbYK2HRi//VjliynyxRQApdV45HcHJ7qYUjHSSWqcaEuAkAuyrv/Zdd/LlkS03IY2uY3SalwXoBADgXtNCQizCyDrRpPbpEIs7QnAJpAsK6mHyCIUAVMqphebVW7DtL5ePazkz/V51sWJdCDr4tguXBZuAiLC8i0pkFFtBgAwv1zhYv2Iwtkw0KAIsy7OhlMO5M9ssc7ju5Hk88sV5pcr2OuHRhy6pwdIxPeBJoow6+KQLCs2/dyaTtgihHxopJrd5Yr397AXgINdxZNnT6GTxg6YIuo5YUOTA0+ePfUIDaxlFpibnAGacECm3Z+/wcb9FFFORGEts8DV6ytKqw/0vcWlnBZVV0BNz7tAshwQYWNKxQLXi0s5lr76gYc9/r25yRku1o9Yo04b1hs46WR0e14WbjjcLPHRL38H1khrShozp2Xck5A2XFzKKfCsM8To83wx5Y1eywmzJgYnuurOAhOhRZj5ZjZAni+mnHwxFemWkB9ulgKDxoZELzOiRoBEf7CruHp9xd5OhZ5Z3958MeWIG3auwXfj8+/OWcmfB7rGJP/jBNwTaxQvLuWUtEZI2wSiTydR9oRrFHUYOfhdoOYmZ3T/Do34KTjYVQDKFmFHBeGumMQQJDcFNAMF3u+DEJm5tK+FUGATC+Sm2tvxxqcelVVIWj74+B1EgPkAmyjw8FdeAdcJKliEVbs1sdmKJqF5CJF7giNH9bopaAFhUct9iR5oSBS1kYmC1ICzllnQC+cmZ7SgqgtN7Z7TSZTTnyPves71zHaQfuEJCtsRhz04TH3NQolSNqMyrNJJVCK+z3bncwBGr+/pjYcJU4w9CZ2Qo4Y8Ed/H6c9p8p7ZjoD1c5MzmnxKxfQha8zvtvRiIgsT8X26pwcAuFg/YrvzOepFbcEKIcCnv38JwD+9v1I4Gxb3nJYFOP25ULKV8TsA7B7/ROFsWG+5bLx3+iHvfv2XLuyW3wtGr++xXY3sYc+Dms9H+j4B9imcDTMv2zEDrx4R6KpW3w3V3k5F224L8wV4Tnz2fW0BVlHzW9A0LtaP6J4eYHS99rPu6QFOOaW3ugG1yeoqaRIK4Mcv/CKMElmNvuHz23k9b3bSvfE/P/4T/AtQuxRrDjm89AAAAA5lWElmTU0AKgAAAAgAAAAAAAAA0lOTAAAAAElFTkSuQmCC",Z="data:image/png;base64,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",W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKkAAAAZCAMAAAB9wf5oAAAAAXNSR0IArs4c6QAAADBQTFRFAAAAAAAASCQAaEgAuUcK6JEa/9UgSRiZaXGfrGrMxcD3+Pz4AAAAAAAAAAAAAAAAv6G2OAAAABB0Uk5TAP///////////////////8BQi0MAAAJySURBVFiF7ZbrbuQgDEaHQFIPvP/71hcMBpzLVJr9tVYr7Upz+h0bh8zr9b+eVZrr36Z9kBmx0m7qq76xFkUsmQ9CRfbgMqz/4ZOxfDYh1d1N5FXogLJrKUcXXkBV2a/r6ZmQ7Y6RVE34AStLcCh3CrZx6ClM9TiQOldR1a3sI9ejY8d5pm6b6Jbi5N3KJps20E92YID7Epy21mw92RQXEgDqTHhHF0+G97hEVs60uY9tsuvKmcQ63EVWXOPsCqVAXXVfU1CX0zxPVFWd2TAZUfhNqDwby85FyAbFD0NIw4a7nseBXJ8OzyTkkqHnraLV1HCcx2TBf+RCaN2EZJP52QL8810VMv7PXqWebuM0kijMA5PHvNPgjmDjGMRxBoSIxd+fWjGNKy6JIWsiEIoVzeVRbSds5ApNM9TR8PKsA9XLCkrjBIQXBAotiAepaEX1vuLEPWmHQD/UYcm53x27uvZLznA8TeQ0z/O0YOP42DP0xDx5DhcrnSIIyYtGM2EsIEbHUN/k82VsOJwmdKe7WxyPWzlR1ZJEjnNJkL8+chm4Od17fBT3MW7kSBUq247A9xSwP1Ih1ESJ9D37KzelTVvMTROa6Evp+vH2dSnFrQXyXPl5HF/kxjNRx0OeolKwaJq3/wzKnvBTZSZK/BAvPXZRm9h2e/I0nBVllBPnHtdK2wiGdx5Ez/hRVPMItM/h1KMnyom3nmn2pMQ3RBXVA/M858mYDu1cbwMx8e67H1ELJud4NVB6LyyeU4cnR+Fx91+nN1fTljdQlIzRJ4frYhXl9i4St9O6tuQ0WyL4DI1xmkqFbyP/WJ/3dkp+0fLr9QvwwjeZ2r2T6gAAAA5lWElmTU0AKgAAAAgAAAAAAAAA0lOTAAAAAElFTkSuQmCC",w={moveLeft:"a",moveRight:"d",jump:"space",dash:"l"};async function q({keyboard:r,renderer:t,initialX:e,initialY:A}){let i=!0,n={type:"automated",duration:1e3};const a=await p.fromSrc({src:k,frames:8,gap:1,padding:1,fps:24}),c=await p.fromSrc({src:N,frames:1,gap:1,padding:1,fps:24,offsetX:3,offsetY:1}),l=await p.fromSrc({src:Z,frames:4,gap:1,padding:1,fps:24,offsetX:1,offsetY:1,once:!0}),d=await p.fromSrc({src:W,frames:3,gap:1,padding:1,fps:24,offsetX:1,offsetY:1}),v=[a,c,l,d],I=[l,d];let f=c;const o=new z({width:a.width,height:a.height,anchor:[.5,1],x:e,y:A,renderer:t,update(u){const O=o.y+o.height*.5>=A,P=.8,C=1,G=5*.15,Q=100,B=14,R=O?P:C,h=new g;n.type==="automated"&&(h.x=.4,n.duration-=u,n.duration<=0&&(n={type:"controlled"})),n.type==="controlled"&&(r.isPressed(w.moveLeft)&&(h.x=-R),r.isPressed(w.moveRight)&&(h.x=R),r.isPressed(w.jump)&&O&&(h.y=-5),h.x>0?i=!0:h.x<0&&(i=!1),r.isPressed(w.dash)&&(n={type:"dash",direction:i?"right":"left",elapsed:Q})),n.type==="dash"?(n.elapsed-=u,n.elapsed<=0&&!r.isPressed(w.dash)?n={type:"controlled"}:(o.velocity.x=0,o.velocity.y=0,h.x=n.direction==="right"?B:-14)):(h.x=h.x+o.vx*-.15,h.y+=G),o.velocity.add(h),Math.abs(o.vx)<.05&&(o.vx=0),o.position.add(o.velocity),o.x+o.width*o.anchor.x<0?o.x=t.width+o.width*.5:o.x>t.width+o.width*o.anchor.x&&(o.x=o.width*-.5),o.y>A?(o.y=A,o.vy=0):o.y<0&&(o.y=0);const L=Math.min(2,Math.abs(o.vx)*.3);n.type==="dash"?f=d:o.y<A?f=l:Math.abs(o.vx)>.5?f=a:f=c;for(const x of v)x!==f?x.resetTime():I.includes(x)?x.update(u):x.update(u*L)},render(u){f.render(u,!i)}});return o}async function j(){const A=new U,i=new V({canvas:document.querySelector("canvas"),width:600,height:300}),n=await q({renderer:i,keyboard:A,initialX:0,initialY:270});new K({update(c){n.update(c)},render(){i.clear(),i.context.fillStyle="#e7dcc7",i.context.fillRect(0,262,i.width,i.height-270+8),i.context.fillStyle="#ae986e",i.context.fillRect(0,262,i.width,1),n.render(i),i.context.save(),i.context.translate(i.width,0),i.context.restore()}}).start()}j();
